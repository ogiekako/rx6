2018-05-27

やっぱり lock をちゃんと実装しよう。そうしないとデータ構造が曖昧になって気持ち悪い。

spinlock を使って、lock data structure を作るのが今日も目標。

2018-05-26

trap を実装しようとしていたけど、実際は、kernmain から呼ばれるのは、tvinit だけで、trap 自体は今の所実行されない。
なので、trap を実装するのは一旦おいておいて、kernmain から実行される本筋のところを実装していこう。


TODO: lock
はあとまわし。

bio::binit は、buffer cache の実装
これは、disk への書き込みが遅いので、それを隠蔽するためのインメモリキャッシュである。

bread()

memide.c は、インメモリファイルシステムを構成する。
qemu-nox では、ide.c を使っている。いまのところ、ide.c に準拠することにする。

